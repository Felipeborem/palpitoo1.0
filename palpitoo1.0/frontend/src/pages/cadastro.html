<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Palpitoo - Cadastro de Craque</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Salsa&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="./css/style.css">

  <style>
    /* ===== MODAL OVERLAY ===== */
    .modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.88);
      backdrop-filter: blur(6px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    .modal-overlay.aberto {
      display: flex;
    }

    /* ===== MODAL BOX ===== */
    .modal-clubes {
      background: var(--card-dark);
      border: 1px solid var(--borda-divisoria);
      border-radius: 16px;
      width: 100%;
      max-width: 560px;
      max-height: 88vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 0 60px rgba(122, 30, 58, 0.1), 0 24px 48px rgba(0,0,0,0.7);
      overflow: hidden;
      animation: modalEntrada 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes modalEntrada {
      from { opacity: 0; transform: scale(0.92) translateY(16px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* Modal header */
    .modal-header {
      padding: 20px 24px 16px;
      border-bottom: 1px solid var(--borda-divisoria);
      flex-shrink: 0;
    }
    .modal-header h3 {
      font-family: 'Russo One', sans-serif;
      font-size: 18px;
      color: var(--text-white);
      margin: 0 0 14px 0;
      letter-spacing: 0.5px;
    }
    .modal-header h3 span {
      color: var(--accent-cyan);
    }

    /* Busca */
    .busca-clube {
      position: relative;
    }
    .busca-clube input {
      width: 100%;
      background: var(--bg-dark);
      border: 1px solid var(--borda-divisoria);
      border-radius: 10px;
      color: var(--text-white);
      font-size: 14px;
      padding: 10px 14px 10px 38px;
      outline: none;
      transition: border-color 0.2s;
      box-sizing: border-box;
      font-family: var(--font-main);
    }
    .busca-clube input:focus {
      border-color: var(--accent-cyan);
      box-shadow: 0 0 0 3px rgba(122, 30, 58, 0.15);
    }
    .busca-clube input::placeholder { color: var(--text-gray); opacity: 0.5; }
    .busca-clube .icone-busca {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-gray);
      font-size: 15px;
      pointer-events: none;
      opacity: 0.5;
    }

    /* Tabs de estado/regi√£o */
    .tabs-regiao {
      display: flex;
      gap: 6px;
      padding: 14px 24px 0;
      overflow-x: auto;
      flex-shrink: 0;
      scrollbar-width: none;
    }
    .tabs-regiao::-webkit-scrollbar { display: none; }
    .tab-btn {
      background: var(--bg-dark);
      border: 1px solid var(--borda-divisoria);
      border-radius: 20px;
      color: var(--text-gray);
      font-size: 12px;
      font-weight: 600;
      padding: 5px 14px;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.15s;
      font-family: 'Russo One', sans-serif;
      letter-spacing: 0.3px;
    }
    .tab-btn:hover { border-color: var(--accent-cyan); color: var(--accent-cyan); }
    .tab-btn.ativo {
      background: var(--accent-cyan);
      border-color: var(--accent-cyan);
      color: var(--text-white);
    }

    /* Lista de clubes */
    .lista-clubes {
      flex: 1;
      overflow-y: auto;
      padding: 14px 24px 20px;
      scrollbar-width: thin;
      scrollbar-color: var(--borda-divisoria) transparent;
    }
    .lista-clubes::-webkit-scrollbar { width: 4px; }
    .lista-clubes::-webkit-scrollbar-track { background: transparent; }
    .lista-clubes::-webkit-scrollbar-thumb { background: var(--borda-divisoria); border-radius: 4px; }

    /* Grupo de estado */
    .grupo-estado {
      margin-bottom: 18px;
    }
    .grupo-estado-titulo {
      font-size: 10px;
      font-weight: 700;
      letter-spacing: 1.5px;
      color: var(--text-gray);
      text-transform: uppercase;
      margin-bottom: 8px;
      padding-bottom: 6px;
      border-bottom: 1px solid var(--borda-divisoria);
      opacity: 0.6;
    }
    .grupo-estado-clubes {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px;
    }

    /* Card de clube */
    .card-clube {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--bg-dark);
      border: 1.5px solid var(--borda-divisoria);
      border-radius: 10px;
      padding: 9px 12px;
      cursor: pointer;
      transition: all 0.15s;
      position: relative;
      overflow: hidden;
    }
    .card-clube::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(122, 30, 58, 0.08), transparent);
      opacity: 0;
      transition: opacity 0.15s;
    }
    .card-clube:hover { border-color: var(--accent-cyan); transform: translateY(-1px); }
    .card-clube:hover::before { opacity: 1; }
    .card-clube.selecionado {
      border-color: var(--accent-cyan);
      background: #1a0a10;
      box-shadow: 0 0 14px rgba(122, 30, 58, 0.25);
    }
    .card-clube.selecionado::before { opacity: 1; }

    .escudo-clube {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--card-dark);
      border: 1px solid var(--borda-divisoria);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      flex-shrink: 0;
      overflow: hidden;
    }

    .nome-clube {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-gray);
      line-height: 1.2;
      flex: 1;
    }
    .card-clube.selecionado .nome-clube { color: var(--text-white); }
    .card-clube:hover .nome-clube { color: var(--text-white); }

    .check-selecionado {
      color: var(--accent-cyan);
      font-size: 14px;
      display: none;
      flex-shrink: 0;
    }
    .card-clube.selecionado .check-selecionado { display: block; }

    /* Mensagem vazio */
    .msg-vazio {
      text-align: center;
      color: var(--text-gray);
      font-size: 13px;
      padding: 30px 0;
      opacity: 0.5;
    }

    /* Modal footer */
    .modal-footer {
      padding: 14px 24px 20px;
      border-top: 1px solid var(--borda-divisoria);
      display: flex;
      gap: 10px;
      flex-shrink: 0;
    }
    .btn-cancelar-modal {
      flex: 1;
      background: transparent;
      border: 1px solid var(--vermelho);
      border-radius: 10px;
      color: var(--vermelho);
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      padding: 11px;
      cursor: pointer;
      transition: all 0.15s;
    }
    .btn-cancelar-modal:hover { background: var(--vermelho); color: var(--text-white); }
    .btn-confirmar-clube {
      flex: 2;
      background: var(--accent-cyan);
      border: none;
      border-radius: 10px;
      color: var(--text-white);
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      font-weight: 700;
      padding: 11px;
      cursor: pointer;
      transition: all 0.15s;
      letter-spacing: 0.3px;
    }
    .btn-confirmar-clube:hover { filter: brightness(1.15); transform: translateY(-1px); }
    .btn-confirmar-clube:disabled { opacity: 0.3; cursor: not-allowed; transform: none; filter: none; }

    /* ===== CAMPO TIME (display) ===== */
    .campo-time-display {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--bg-dark);
      border: 1px solid var(--borda-divisoria);
      border-radius: 8px;
      padding: 10px 14px;
      cursor: pointer;
      transition: all 0.2s;
      min-height: 44px;
      margin-bottom: 15px;
    }
    .campo-time-display:hover {
      border-color: var(--accent-cyan);
      box-shadow: 0 0 8px rgba(122, 30, 58, 0.2);
    }
    .campo-time-display .escudo-mini {
      font-size: 20px;
    }
    .campo-time-display .nome-time-selecionado {
      flex: 1;
      color: var(--text-white);
      font-size: 14px;
      font-family: var(--font-main);
    }
    .campo-time-display .placeholder-time {
      flex: 1;
      color: var(--text-gray);
      font-size: 14px;
      font-family: var(--font-main);
      opacity: 0.6;
    }
    .campo-time-display .seta {
      color: var(--text-gray);
      font-size: 11px;
      transition: color 0.15s;
      opacity: 0.6;
    }
    .campo-time-display:hover .seta { color: var(--accent-cyan); opacity: 1; }
  </style>
</head>
<body>

  <main class="hero-section" style="justify-content: center; width: 100%;">
    <div class="login-area" style="justify-content: center; width: 100%;">
      
      <div class="login-card animacao-suave">
        <div class="login-header">
          <h3 class="font-russo" style="color: var(--accent-cyan);">Palpitoo</h3>
          <p>Crie sua conta na Arena</p>
        </div>
        
        <form id="meuFormulario">
          
          <div class="form-group" style="display: flex; flex-direction: column; align-items: center; text-align: center;">
            <img id="previewImagem" src="https://via.placeholder.com/80" alt="Preview" class="foto-perfil mb-10" style="width: 80px; height: 80px;">
            <label for="campoFoto" style="cursor: pointer; color: var(--accent-cyan); font-weight: bold; font-size: 14px; text-decoration: underline;">
              üì∏ Escolher Foto
            </label>
            <input type="file" id="campoFoto" accept="image/*" style="display: none;" onchange="prepararFoto()">
          </div>

          <div class="form-group">
            <label for="campoNome">Nome de Craque</label>
            <input id="campoNome" type="text" placeholder="Seu apelido na liga" required>
          </div>

          <div class="form-group">
            <label for="campoEmail">E-mail</label>
            <input id="campoEmail" type="email" placeholder="Seu melhor e-mail" required>
          </div>
          
          <div class="form-group">
            <label for="campoSenha">Senha</label>
            <input id="campoSenha" type="password" placeholder="Crie uma senha forte" required>
          </div>

          <div class="form-group text-left" style="width: 100%;">
            <label>Time do Cora√ß√£o</label>
            <div class="campo-time-display" onclick="abrirModalClubes()" id="displayTime">
              <span class="escudo-mini" id="escudoMini">‚öΩ</span>
              <span class="placeholder-time" id="textoTimeSelecionado">Selecione seu clube...</span>
              <span class="seta">‚ñº</span>
            </div>
          </div>

          <button type="button" onclick="enviarDados()" class="btn-primary mt-10">
            Criar Minha Conta
          </button>
        </form>

        <div class="login-footer">
          J√° tem conta? <a href="login.html" class="btn-link">Entrar no Jogo</a>
        </div>
      </div>

    </div>
  </main>

  <div class="modal-overlay" id="modalClubes">
    <div class="modal-clubes">

      <div class="modal-header">
        <h3>Escolha seu <span>Clube do Cora√ß√£o</span></h3>
        <div class="busca-clube">
          <span class="icone-busca">üîç</span>
          <input type="text" id="buscaClube" placeholder="Buscar clube..." oninput="filtrarClubes(this.value)">
        </div>
      </div>

      <div class="tabs-regiao" id="tabsRegiao">
        <button class="tab-btn ativo" onclick="filtrarPorRegiao('todos', this)">Todos</button>
        <button class="tab-btn" onclick="filtrarPorRegiao('sudeste', this)">Sudeste</button>
        <button class="tab-btn" onclick="filtrarPorRegiao('sul', this)">Sul</button>
        <button class="tab-btn" onclick="filtrarPorRegiao('nordeste', this)">Nordeste</button>
        <button class="tab-btn" onclick="filtrarPorRegiao('centroeste', this)">Centro-Oeste</button>
        <button class="tab-btn" onclick="filtrarPorRegiao('norte', this)">Norte</button>
      </div>

      <div class="lista-clubes" id="listaClubes">
        </div>

      <div class="modal-footer">
        <button class="btn-cancelar-modal" onclick="fecharModalClubes()">Cancelar</button>
        <button class="btn-confirmar-clube" id="btnConfirmar" onclick="confirmarClube()" disabled>Confirmar Clube</button>
      </div>

    </div>
  </div>

  <script>
    let fotoBase64 = "";

    function prepararFoto() {
      const arquivo = document.getElementById('campoFoto').files[0];
      if (arquivo) {
        const reader = new FileReader();
        reader.onloadend = function() {
          fotoBase64 = reader.result; 
          document.getElementById('previewImagem').src = fotoBase64; 
        }
        reader.readAsDataURL(arquivo);
      }
    }

    // =====================================================
    // DADOS DOS CLUBES (Mesmo do Perfil)
    // =====================================================
    const clubes = [
      { nome: "S√£o Paulo FC",     sigla: "SPF", emoji: "üî¥‚ö´", estado: "SP", regiao: "sudeste" },
      { nome: "Corinthians",      sigla: "COR", emoji: "‚ö´‚ö™", estado: "SP", regiao: "sudeste" },
      { nome: "Palmeiras",        sigla: "PAL", emoji: "üíö",   estado: "SP", regiao: "sudeste" },
      { nome: "Santos",           sigla: "SAN", emoji: "‚ö™‚ö´", estado: "SP", regiao: "sudeste" },
      { nome: "Portuguesa",       sigla: "POR", emoji: "üî¥üü¢", estado: "SP", regiao: "sudeste" },
      { nome: "Guarani",          sigla: "GUA", emoji: "üü¢‚ö™", estado: "SP", regiao: "sudeste" },
      { nome: "Ponte Preta",      sigla: "PPT", emoji: "‚ö´‚ö™", estado: "SP", regiao: "sudeste" },
      { nome: "Ituano",           sigla: "ITU", emoji: "üî¥‚ö´", estado: "SP", regiao: "sudeste" },
      { nome: "Red Bull Bragantino", sigla: "RBB", emoji: "üî¥‚ö™", estado: "SP", regiao: "sudeste" },
      { nome: "Botafogo-SP",      sigla: "BSP", emoji: "‚ö™‚ö´", estado: "SP", regiao: "sudeste" },
      { nome: "Flamengo",         sigla: "FLA", emoji: "üî¥‚ö´", estado: "RJ", regiao: "sudeste" },
      { nome: "Vasco da Gama",    sigla: "VAS", emoji: "‚ö´‚ö™", estado: "RJ", regiao: "sudeste" },
      { nome: "Fluminense",       sigla: "FLU", emoji: "üî¥üü¢", estado: "RJ", regiao: "sudeste" },
      { nome: "Botafogo",         sigla: "BOT", emoji: "‚≠ê‚ö´", estado: "RJ", regiao: "sudeste" },
      { nome: "Bangu",            sigla: "BAN", emoji: "üî¥‚ö™", estado: "RJ", regiao: "sudeste" },
      { nome: "Resende",          sigla: "RES", emoji: "üü¢‚ö™", estado: "RJ", regiao: "sudeste" },
      { nome: "Atl√©tico Mineiro", sigla: "CAM", emoji: "‚ö´‚ö™", estado: "MG", regiao: "sudeste" },
      { nome: "Cruzeiro",         sigla: "CRU", emoji: "üîµ‚ö™", estado: "MG", regiao: "sudeste" },
      { nome: "Am√©rica Mineiro",  sigla: "AME", emoji: "üê∞üü¢", estado: "MG", regiao: "sudeste" },
      { nome: "Tombense",         sigla: "TOM", emoji: "üî¥‚ö™", estado: "MG", regiao: "sudeste" },
      { nome: "Athletic Club",    sigla: "ATH", emoji: "üî¥‚ö´", estado: "MG", regiao: "sudeste" },
      { nome: "Rio Branco-ES",    sigla: "RBE", emoji: "üî¥‚ö´", estado: "ES", regiao: "sudeste" },
      { nome: "Vit√≥ria-ES",       sigla: "VES", emoji: "üî¥üü°", estado: "ES", regiao: "sudeste" },
      { nome: "Gr√™mio",           sigla: "GRE", emoji: "üîµ‚ö´", estado: "RS", regiao: "sul" },
      { nome: "Internacional",    sigla: "INT", emoji: "üî¥‚ö™", estado: "RS", regiao: "sul" },
      { nome: "Caxias",           sigla: "CAX", emoji: "üü¢‚ö™", estado: "RS", regiao: "sul" },
      { nome: "Juventude",        sigla: "JUV", emoji: "üü¢‚ö™", estado: "RS", regiao: "sul" },
      { nome: "Brasil de Pelotas",sigla: "BRS", emoji: "üü¢‚ö™", estado: "RS", regiao: "sul" },
      { nome: "Novo Hamburgo",    sigla: "NHM", emoji: "üîµ‚ö™", estado: "RS", regiao: "sul" },
      { nome: "Figueirense",      sigla: "FIG", emoji: "‚ö´‚ö™", estado: "SC", regiao: "sul" },
      { nome: "Chapecoense",      sigla: "CHP", emoji: "üü¢‚ö™", estado: "SC", regiao: "sul" },
      { nome: "Joinville",        sigla: "JOI", emoji: "üî¥‚ö´", estado: "SC", regiao: "sul" },
      { nome: "Ava√≠",             sigla: "AVA", emoji: "üîµ‚ö™", estado: "SC", regiao: "sul" },
      { nome: "Crici√∫ma",         sigla: "CRI", emoji: "üü°‚ö´", estado: "SC", regiao: "sul" },
      { nome: "Brusque",          sigla: "BRU", emoji: "üîµüî¥", estado: "SC", regiao: "sul" },
      { nome: "Athletico-PR",     sigla: "CAP", emoji: "üî¥‚ö´", estado: "PR", regiao: "sul" },
      { nome: "Coritiba",         sigla: "COI", emoji: "üü¢‚ö™", estado: "PR", regiao: "sul" },
      { nome: "Paran√° Clube",     sigla: "PAR", emoji: "üîµ‚ö™", estado: "PR", regiao: "sul" },
      { nome: "Maring√° FC",       sigla: "MAR", emoji: "üî¥‚ö™", estado: "PR", regiao: "sul" },
      { nome: "Londrina",         sigla: "LON", emoji: "üî¥‚ö™", estado: "PR", regiao: "sul" },
      { nome: "Oper√°rio-PR",      sigla: "OPR", emoji: "‚ö´‚ö™", estado: "PR", regiao: "sul" },
      { nome: "Bahia",            sigla: "BAH", emoji: "üîµüî¥", estado: "BA", regiao: "nordeste" },
      { nome: "Vit√≥ria",          sigla: "VIT", emoji: "üî¥‚ö´", estado: "BA", regiao: "nordeste" },
      { nome: "Juazeirense",      sigla: "JUA", emoji: "üü¢‚ö™", estado: "BA", regiao: "nordeste" },
      { nome: "Sport Recife",     sigla: "SPO", emoji: "üî¥‚ö´", estado: "PE", regiao: "nordeste" },
      { nome: "N√°utico",          sigla: "NAU", emoji: "üî¥‚ö™", estado: "PE", regiao: "nordeste" },
      { nome: "Santa Cruz",       sigla: "SCZ", emoji: "üî¥‚ö´", estado: "PE", regiao: "nordeste" },
      { nome: "Fortaleza",        sigla: "FOR", emoji: "üîµüî¥", estado: "CE", regiao: "nordeste" },
      { nome: "Cear√° SC",         sigla: "CEA", emoji: "‚ö´‚ö™", estado: "CE", regiao: "nordeste" },
      { nome: "Ferrovi√°rio-CE",   sigla: "FER", emoji: "üî¥‚ö™", estado: "CE", regiao: "nordeste" },
      { nome: "Sampaio Corr√™a",   sigla: "SAM", emoji: "üî¥‚ö´", estado: "MA", regiao: "nordeste" },
      { nome: "River-PI",         sigla: "RIV", emoji: "üîµ‚ö™", estado: "PI", regiao: "nordeste" },
      { nome: "ABC",              sigla: "ABC", emoji: "üî¥‚ö´", estado: "RN", regiao: "nordeste" },
      { nome: "Am√©rica-RN",       sigla: "AMN", emoji: "üî¥‚ö´", estado: "RN", regiao: "nordeste" },
      { nome: "CSA",              sigla: "CSA", emoji: "üîµ‚ö™", estado: "AL", regiao: "nordeste" },
      { nome: "CRB",              sigla: "CRB", emoji: "üî¥‚ö´", estado: "AL", regiao: "nordeste" },
      { nome: "Treze",            sigla: "TRE", emoji: "üî¥‚ö™", estado: "PB", regiao: "nordeste" },
      { nome: "Botafogo-PB",      sigla: "BPB", emoji: "‚ö´‚ö™", estado: "PB", regiao: "nordeste" },
      { nome: "Bahia de Feira",   sigla: "BDF", emoji: "üîµ‚ö™", estado: "BA", regiao: "nordeste" },
      { nome: "Goi√°s",            sigla: "GOI", emoji: "üü¢‚ö™", estado: "GO", regiao: "centroeste" },
      { nome: "Atl√©tico Goianiense", sigla: "ACG", emoji: "üî¥‚ö´", estado: "GO", regiao: "centroeste" },
      { nome: "Vila Nova",        sigla: "VNO", emoji: "üî¥‚ö´", estado: "GO", regiao: "centroeste" },
      { nome: "Aparecidense",     sigla: "APR", emoji: "üî¥‚ö™", estado: "GO", regiao: "centroeste" },
      { nome: "Cuiab√°",           sigla: "CUI", emoji: "üü°‚ö´", estado: "MT", regiao: "centroeste" },
      { nome: "Luverdense",       sigla: "LUV", emoji: "üü¢‚ö™", estado: "MT", regiao: "centroeste" },
      { nome: "Costa Rica-MS",    sigla: "CRM", emoji: "üîµ‚ö™", estado: "MS", regiao: "centroeste" },
      { nome: "Bras√≠lia FC",      sigla: "BFC", emoji: "üîµ‚ö™", estado: "DF", regiao: "centroeste" },
      { nome: "Remo",             sigla: "REM", emoji: "üîµ‚ö™", estado: "PA", regiao: "norte" },
      { nome: "Paysandu",         sigla: "PSC", emoji: "üîµ‚ö™", estado: "PA", regiao: "norte" },
      { nome: "Tuna Luso",        sigla: "TUN", emoji: "üî¥‚ö™", estado: "PA", regiao: "norte" },
      { nome: "Nacional-AM",      sigla: "NAM", emoji: "üî¥‚ö´", estado: "AM", regiao: "norte" },
      { nome: "Fast Clube",       sigla: "FST", emoji: "üî¥‚ö™", estado: "AM", regiao: "norte" },
      { nome: "S√£o Raimundo-AM",  sigla: "SRM", emoji: "üîµ‚ö™", estado: "AM", regiao: "norte" },
      { nome: "Fluminense-PI",    sigla: "FPI", emoji: "üî¥üü¢", estado: "PI", regiao: "norte" },
      { nome: "Rio Negro-AM",     sigla: "RNE", emoji: "‚ö´üîµ", estado: "AM", regiao: "norte" },
    ];

    let clubeSelecionadoTemp = null;
    let clubeSalvo = null; // Guardar√° o time selecionado no modal
    let regiaoAtual = 'todos';
    let buscaAtual = '';

    function renderizarClubes() {
      const container = document.getElementById('listaClubes');
      let lista = clubes.filter(c => {
        const matchRegiao = regiaoAtual === 'todos' || c.regiao === regiaoAtual;
        const matchBusca  = c.nome.toLowerCase().includes(buscaAtual.toLowerCase()) ||
                            c.estado.toLowerCase().includes(buscaAtual.toLowerCase());
        return matchRegiao && matchBusca;
      });

      if (lista.length === 0) {
        container.innerHTML = '<div class="msg-vazio">Nenhum clube encontrado üòï</div>';
        return;
      }

      const porEstado = {};
      lista.forEach(c => {
        if (!porEstado[c.estado]) porEstado[c.estado] = [];
        porEstado[c.estado].push(c);
      });

      let html = '';
      for (const estado in porEstado) {
        html += `<div class="grupo-estado">
          <div class="grupo-estado-titulo">${estado}</div>
          <div class="grupo-estado-clubes">`;
        
        porEstado[estado].forEach(c => {
          const sel = clubeSelecionadoTemp?.nome === c.nome ? 'selecionado' : '';
          html += `
            <div class="card-clube ${sel}" onclick="selecionarClube(this, '${c.nome}', '${c.emoji}')">
              <div class="escudo-clube">${c.emoji}</div>
              <span class="nome-clube">${c.nome}</span>
              <span class="check-selecionado">‚úì</span>
            </div>`;
        });
        html += `</div></div>`;
      }
      container.innerHTML = html;
    }

    function selecionarClube(el, nome, emoji) {
      document.querySelectorAll('.card-clube.selecionado').forEach(c => c.classList.remove('selecionado'));
      el.classList.add('selecionado');
      clubeSelecionadoTemp = { nome, emoji };
      document.getElementById('btnConfirmar').disabled = false;
    }

    function filtrarPorRegiao(regiao, btn) {
      regiaoAtual = regiao;
      document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('ativo'));
      btn.classList.add('ativo');
      document.getElementById('buscaClube').value = '';
      buscaAtual = '';
      renderizarClubes();
    }

    function filtrarClubes(valor) {
      buscaAtual = valor;
      if (valor) {
        regiaoAtual = 'todos';
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('ativo'));
        document.querySelector('.tab-btn').classList.add('ativo');
      }
      renderizarClubes();
    }

    function abrirModalClubes() {
      clubeSelecionadoTemp = clubeSalvo ? { ...clubeSalvo } : null;
      regiaoAtual = 'todos';
      buscaAtual = '';
      document.getElementById('buscaClube').value = '';
      document.querySelectorAll('.tab-btn').forEach((b, i) => b.classList.toggle('ativo', i === 0));
      document.getElementById('btnConfirmar').disabled = !clubeSelecionadoTemp;
      renderizarClubes();
      document.getElementById('modalClubes').classList.add('aberto');
    }

    function fecharModalClubes() {
      document.getElementById('modalClubes').classList.remove('aberto');
    }

    function confirmarClube() {
      if (!clubeSelecionadoTemp) return;
      clubeSalvo = { ...clubeSelecionadoTemp };
      
      // Atualiza o display no formul√°rio de cadastro
      document.getElementById('escudoMini').textContent = clubeSalvo.emoji;
      const textoEl = document.getElementById('textoTimeSelecionado');
      textoEl.textContent = clubeSalvo.nome;
      textoEl.className = 'nome-time-selecionado';

      fecharModalClubes();
    }

    document.getElementById('modalClubes').addEventListener('click', function(e) {
      if (e.target === this) fecharModalClubes();
    });

    // =====================================================
    // ENVIO PARA O BANCO DE DADOS
    // =====================================================
    async function enviarDados() {
      const nome = document.getElementById('campoNome').value;
      const email = document.getElementById('campoEmail').value;
      const senha = document.getElementById('campoSenha').value;
      
      // Pega o time da vari√°vel salva pelo Modal, e n√£o mais do input
      const time_favorito = clubeSalvo ? clubeSalvo.nome : null;
      
      if (!nome || !email || !senha) {
        alert("Preencha todos os campos para entrar em campo!");
        return;
      }

      if (!time_favorito) {
        alert("Escolha o seu Clube do Cora√ß√£o!");
        return;
      }

      try {
        const resposta = await fetch('https://palpitoo-api.onrender.com/cadastro', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ 
            nome: nome, 
            email: email, 
            senha: senha,
            time_favorito: time_favorito,
            foto_perfil: fotoBase64 
          })
        });

        const resultado = await resposta.json();

        if (resposta.ok) {
          alert("‚úÖ " + resultado.mensagem);
          
          document.getElementById('meuFormulario').reset();
          document.getElementById('previewImagem').src = "https://via.placeholder.com/80";
          
          // Reseta o visual do bot√£o de time
          document.getElementById('escudoMini').textContent = '‚öΩ';
          const textoEl = document.getElementById('textoTimeSelecionado');
          textoEl.textContent = 'Selecione seu clube...';
          textoEl.className = 'placeholder-time';
          clubeSalvo = null;
          fotoBase64 = ""; 
          
          window.location.href = 'login.html'; 
        } else {
          alert("‚ùå Ops: " + resultado.erro);
        }

      } catch (error) {
        console.error("Erro na conex√£o:", error);
        alert("Servidor desligado! Verifique a conex√£o com a API.");
      }
    }
  </script>

</body>
</html>
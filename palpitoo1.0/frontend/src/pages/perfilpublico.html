<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Palpitoo - Perfil do Palpiteiro</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Salsa&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./css/style.css">

  <style>
    /* â”€â”€ Abas â”€â”€ */
    .abas-perfil {
      display: flex;
      gap: 8px;
      margin-bottom: 28px;
    }
    .aba-btn {
      flex: 1;
      padding: 12px;
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      text-transform: uppercase;
      border: 1px solid var(--borda-divisoria);
      border-radius: 12px;
      cursor: pointer;
      background: var(--bg-dark);
      color: var(--text-gray);
      transition: all 0.2s ease;
    }
    .aba-btn.ativa {
      background: var(--accent-cyan);
      color: var(--text-white);
      border-color: var(--accent-cyan);
    }
    .painel-aba { display: none; }
    .painel-aba.ativo { display: block; }

    /* â”€â”€ Stat boxes â”€â”€ */
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }
    .stat-box {
      background: var(--bg-dark);
      border: 1px solid var(--borda-divisoria);
      border-radius: 14px;
      padding: 16px 10px;
      text-align: center;
      transition: border-color 0.2s ease;
    }
    .stat-box:hover { border-color: var(--accent-cyan); }
    .stat-valor {
      font-family: 'Russo One', sans-serif;
      font-size: 26px;
      color: var(--accent-cyan);
    }
    .stat-label {
      font-size: 10px;
      color: var(--text-gray);
      text-transform: uppercase;
      font-weight: 700;
      margin-top: 4px;
      line-height: 1.3;
    }

    /* â”€â”€ Barra de aproveitamento â”€â”€ */
    .barra-container {
      background: var(--bg-dark);
      border-radius: 20px;
      height: 10px;
      overflow: hidden;
      margin-top: 6px;
    }
    .barra-fill {
      height: 100%;
      border-radius: 20px;
      background: linear-gradient(to right, var(--accent-green), var(--accent-cyan));
      transition: width 0.8s ease;
    }

    /* â”€â”€ HistÃ³rico de ligas â”€â”€ */
    .liga-historico-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 0;
      border-bottom: 1px dashed var(--borda-divisoria);
    }
    .liga-historico-item:last-child { border-bottom: none; }

    /* â”€â”€ Ãšltimos palpites â”€â”€ */
    .palpite-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      background: var(--bg-dark);
      border-radius: 10px;
      margin-bottom: 8px;
      border: 1px solid var(--borda-divisoria);
    }
    .palpite-jogo {
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      color: var(--text-white);
    }
    .palpite-placar {
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      color: var(--accent-cyan);
    }
    .palpite-pts {
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      min-width: 50px;
      text-align: right;
    }
    .pts-3 { color: #4ade80; }
    .pts-1 { color: #eab308; }
    .pts-0 { color: #f87171; }

    /* â”€â”€ TrofÃ©u â”€â”€ */
    .trofeu-card {
      background: var(--bg-dark);
      border: 1px solid var(--borda-divisoria);
      border-radius: 14px;
      padding: 16px 12px;
      text-align: center;
      transition: border-color 0.2s ease;
    }
    .trofeu-card:hover { border-color: #eab308; }

    /* â”€â”€ Badge de posiÃ§Ã£o â”€â”€ */
    .posicao-badge {
      display: inline-block;
      padding: 6px 16px;
      border-radius: 20px;
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      background: rgba(122,30,58,0.15);
      border: 1px solid var(--accent-cyan);
      color: var(--accent-cyan);
    }

    /* â”€â”€ BotÃ£o seguir no topo â”€â”€ */
    .btn-seguir-topo {
      padding: 10px 24px;
      border-radius: 12px;
      font-family: 'Russo One', sans-serif;
      font-size: 13px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-top: 14px;
    }
    .btn-seguir-topo.seguir {
      background: var(--accent-cyan);
      color: var(--text-white);
    }
    .btn-seguir-topo.seguir:hover { opacity: 0.85; }
    .btn-seguir-topo.seguindo {
      background: transparent;
      color: var(--vermelho);
      border: 1px solid var(--vermelho);
    }
    .btn-seguir-topo.seguindo:hover { background: var(--vermelho); color: var(--text-white); }
  </style>
</head>
<body>

  <header class="navbar">
    <a href="index.html" class="logo-link">
      <img src="./img/pato.png" alt="Logo Palpitoo" class="logo-imagem">
    </a>
    <nav>
      <ul class="nav-links">
        <li><a href="index.html">InÃ­cio</a></li>
        <li><a href="ligas.html">Ligas</a></li>
        <li><a href="palpites.html">Palpites</a></li>
        <li><a href="novidades.html">Novidades</a></li>
        <li><a href="social.html" class="ativo">Social</a></li>
        <li><a href="carreira.html">Carreira</a></li>
      </ul>
    </nav>
  </header>

  <main class="container-principal" style="max-width: 860px; margin-top: 40px;">

    <!-- â•â• TOPO: IDENTIDADE DO PALPITEIRO â•â• -->
    <section class="cartao bg-escuro animacao-suave text-center mb-20"
             style="border-top: 3px solid var(--accent-cyan); position: relative; overflow: hidden;">

      <div style="position:absolute;top:-40px;right:-40px;font-size:140px;opacity:0.03;pointer-events:none;">ğŸ¦†</div>

      <img id="fotoPerfil" src="https://via.placeholder.com/100" alt="Foto"
           class="foto-perfil" style="width:100px;height:100px;margin:0 auto;border-color:var(--accent-cyan);border-width:3px;">

      <h2 id="nomeUsuario" class="font-russo titulo-branco mt-15" style="font-size:26px;">Carregando...</h2>
      <p id="timeUsuario" style="color:var(--text-gray);font-size:13px;margin-top:4px;text-transform:uppercase;">â€” â€¢ â€”</p>

      <div style="display:flex;justify-content:center;gap:20px;margin-top:16px;flex-wrap:wrap;">
        <div>
          <p class="font-russo" style="font-size:11px;color:var(--text-gray);">SEGUIDORES</p>
          <p class="font-russo" id="contSeguidores" style="font-size:20px;color:var(--text-white);">â€”</p>
        </div>
        <div style="width:1px;background:var(--borda-divisoria);"></div>
        <div>
          <p class="font-russo" style="font-size:11px;color:var(--text-gray);">SEGUINDO</p>
          <p class="font-russo" id="contSeguindo" style="font-size:20px;color:var(--text-white);">â€”</p>
        </div>
        <div style="width:1px;background:var(--borda-divisoria);"></div>
        <div>
          <p class="font-russo" style="font-size:11px;color:var(--text-gray);">LIGA ATUAL</p>
          <p class="font-russo" id="ligaAtual" style="font-size:14px;color:var(--accent-cyan);">â€”</p>
        </div>
      </div>

      <div>
        <button id="btnSeguir" class="btn-seguir-topo seguir" onclick="toggleSeguir()">
          + Seguir
        </button>
      </div>

      <a href="social.html" style="display:inline-block;margin-top:12px;font-size:11px;color:var(--text-gray);">
        â† Voltar ao Social
      </a>
    </section>

    <!-- â•â• ABAS â•â• -->
    <div class="abas-perfil">
      <button class="aba-btn ativa" id="aba-btn-temporada" onclick="trocarAba('temporada')">
        âš¡ Temporada Atual
      </button>
      <button class="aba-btn" id="aba-btn-carreira" onclick="trocarAba('carreira')">
        ğŸ“œ Carreira HistÃ³rica
      </button>
    </div>

    <!-- â•â• ABA: TEMPORADA ATUAL â•â• -->
    <div id="painel-temporada" class="painel-aba ativo">
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));gap:24px;">

        <!-- Desempenho atual -->
        <section class="cartao bg-escuro animacao-suave">
          <h3 class="font-russo titulo-branco mb-15" style="font-size:18px;">ğŸ“Š Desempenho na Temporada</h3>
          <div class="divisor-tracejado mb-20"></div>

          <div class="stat-grid">
            <div class="stat-box">
              <div class="stat-valor" id="t-pontos">â€”</div>
              <div class="stat-label">Pontos Totais</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="t-cravadas">â€”</div>
              <div class="stat-label">CravaÃ§Ãµes ğŸ¯</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="t-acertos">â€”</div>
              <div class="stat-label">Acertos âœ…</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="t-erros">â€”</div>
              <div class="stat-label">Erros âŒ</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="t-palpites">â€”</div>
              <div class="stat-label">Palpites Feitos</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="t-aproveitamento">â€”</div>
              <div class="stat-label">Aproveitamento</div>
            </div>
          </div>

          <div style="background:var(--bg-dark);border:1px solid var(--borda-divisoria);border-radius:12px;padding:14px;">
            <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
              <span style="font-family:'Russo One',sans-serif;font-size:12px;color:var(--text-gray);">Taxa de acerto</span>
              <span style="font-family:'Russo One',sans-serif;font-size:12px;color:var(--accent-cyan);" id="t-taxa-label">â€”%</span>
            </div>
            <div class="barra-container">
              <div class="barra-fill" id="t-barra" style="width:0%"></div>
            </div>
          </div>
        </section>

        <!-- PosiÃ§Ã£o e Ãºltimos palpites -->
        <div style="display:flex;flex-direction:column;gap:24px;">

          <section class="cartao bg-escuro animacao-suave">
            <h3 class="font-russo titulo-branco mb-15" style="font-size:18px;">ğŸ† PosiÃ§Ã£o na Liga</h3>
            <div class="divisor-tracejado mb-20"></div>

            <div style="text-align:center;padding:10px 0;">
              <div style="font-size:50px;margin-bottom:8px;" id="t-posicao-icone">â€”</div>
              <span class="posicao-badge" id="t-posicao-texto">Carregando...</span>
              <p style="color:var(--text-gray);font-size:12px;margin-top:10px;" id="t-nome-liga">â€”</p>
            </div>
          </section>

          <section class="cartao bg-escuro animacao-suave">
            <h3 class="font-russo titulo-branco mb-15" style="font-size:18px;">ğŸ• Ãšltimos Palpites</h3>
            <div class="divisor-tracejado mb-20"></div>

            <div id="lista-ultimos-palpites">
              <p class="text-center" style="color:var(--text-gray);font-size:13px;">Carregando...</p>
            </div>
          </section>

        </div>

      </div>
    </div>

    <!-- â•â• ABA: CARREIRA HISTÃ“RICA â•â• -->
    <div id="painel-carreira" class="painel-aba">
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));gap:24px;">

        <!-- Stats totais de carreira -->
        <section class="cartao bg-escuro animacao-suave">
          <h3 class="font-russo titulo-branco mb-15" style="font-size:18px;">ğŸ“ˆ Carreira Total</h3>
          <div class="divisor-tracejado mb-20"></div>

          <div class="stat-grid">
            <div class="stat-box">
              <div class="stat-valor" id="c-pontos">â€”</div>
              <div class="stat-label">Pontos de Carreira</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="c-palpites">â€”</div>
              <div class="stat-label">Total de Palpites</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="c-ligas">â€”</div>
              <div class="stat-label">Ligas Disputadas</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="c-cravadas">â€”</div>
              <div class="stat-label">CravaÃ§Ãµes ğŸ¯</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="c-acertos">â€”</div>
              <div class="stat-label">Acertos âœ…</div>
            </div>
            <div class="stat-box">
              <div class="stat-valor" id="c-aproveitamento">â€”</div>
              <div class="stat-label">Aproveitamento</div>
            </div>
          </div>

          <div style="background:var(--bg-dark);border:1px solid var(--borda-divisoria);border-radius:12px;padding:14px;">
            <div style="display:flex;justify-content:space-between;margin-bottom:6px;">
              <span style="font-family:'Russo One',sans-serif;font-size:12px;color:var(--text-gray);">Taxa histÃ³rica de acerto</span>
              <span style="font-family:'Russo One',sans-serif;font-size:12px;color:var(--accent-cyan);" id="c-taxa-label">â€”%</span>
            </div>
            <div class="barra-container">
              <div class="barra-fill" id="c-barra" style="width:0%"></div>
            </div>
          </div>
        </section>

        <div style="display:flex;flex-direction:column;gap:24px;">

          <!-- Sala de trofÃ©us -->
          <section class="cartao bg-escuro animacao-suave">
            <h3 class="font-russo titulo-branco mb-15" style="font-size:18px;">ğŸ… Sala de TrofÃ©us</h3>
            <div class="divisor-tracejado mb-20"></div>

            <div id="sala-trofeus" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
              <p class="text-center" style="color:var(--text-gray);font-size:13px;grid-column:span 2;">Carregando...</p>
            </div>
          </section>

          <!-- HistÃ³rico de ligas -->
          <section class="cartao bg-escuro animacao-suave">
            <h3 class="font-russo titulo-branco mb-15" style="font-size:18px;">ğŸ“œ HistÃ³rico de Ligas</h3>
            <div class="divisor-tracejado mb-20"></div>

            <div id="historico-ligas">
              <p class="text-center" style="color:var(--text-gray);font-size:13px;">Carregando...</p>
            </div>
          </section>

        </div>
      </div>
    </div>

  </main>

  <div id="container-avisos"></div>

<script>
  const idLogado = localStorage.getItem('craqueId') || localStorage.getItem('id_craque');
  const params   = new URLSearchParams(window.location.search);
  const idPerfil = params.get('id');

  // â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function mostrarAviso(msg, tipo = 'info') {
    const cont  = document.getElementById('container-avisos');
    const toast = document.createElement('div');
    const icone = tipo === 'sucesso' ? 'âœ…' : tipo === 'erro' ? 'âŒ' : 'â„¹ï¸';
    toast.className = `aviso-toast aviso-${tipo}`;
    toast.innerHTML = `<span>${icone}</span><span>${msg}</span>`;
    cont.appendChild(toast);
    setTimeout(() => { toast.classList.add('aviso-saindo'); setTimeout(() => toast.remove(), 300); }, 3000);
  }

  // â”€â”€ TROCAR ABA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function trocarAba(qual) {
    document.getElementById('painel-temporada').classList.toggle('ativo', qual === 'temporada');
    document.getElementById('painel-carreira').classList.toggle('ativo', qual === 'carreira');
    document.getElementById('aba-btn-temporada').classList.toggle('ativa', qual === 'temporada');
    document.getElementById('aba-btn-carreira').classList.toggle('ativa', qual === 'carreira');
  }

  // â”€â”€ TOGGLE SEGUIR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function toggleSeguir() {
    if (!idLogado) { mostrarAviso('VocÃª precisa estar logado!', 'erro'); return; }
    const btn = document.getElementById('btnSeguir');
    const estaSeguindo = btn.classList.contains('seguindo');

    try {
      if (estaSeguindo) {
        const res = await fetch('https://palpitoo-api.onrender.com/deixar-seguir', {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ seguidor_id: idLogado, seguido_id: idPerfil })
        });
        if (res.ok) {
          btn.classList.replace('seguindo', 'seguir');
          btn.innerText = '+ Seguir';
          mostrarAviso('Deixou de seguir.', 'info');
          atualizarContadores();
        }
      } else {
        const res = await fetch('https://palpitoo-api.onrender.com/seguir', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ seguidor_id: idLogado, seguido_id: idPerfil })
        });
        if (res.ok) {
          btn.classList.replace('seguir', 'seguindo');
          btn.innerText = 'Seguindo';
          mostrarAviso('Palpiteiro seguido!', 'sucesso');
          atualizarContadores();
        }
      }
    } catch (e) { mostrarAviso('Erro ao conectar.', 'erro'); }
  }

  // â”€â”€ CARREGAR PERFIL BÃSICO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function carregarPerfil() {
    if (!idPerfil) { window.location.href = 'social.html'; return; }

    try {
      const res  = await fetch(`https://palpitoo-api.onrender.com/usuario/${idPerfil}`);
      const data = await res.json();

      document.title = `Palpitoo - ${data.nome}`;
      document.getElementById('nomeUsuario').innerText = data.nome;
      document.getElementById('timeUsuario').innerText = data.time_favorito || 'â€” sem time â€”';
      if (data.foto_perfil) document.getElementById('fotoPerfil').src = data.foto_perfil;
      if (data.liga_atual)  document.getElementById('ligaAtual').innerText = data.liga_atual;

      // Esconde botÃ£o de seguir se for o prÃ³prio perfil
      if (String(idPerfil) === String(idLogado)) {
        document.getElementById('btnSeguir').style.display = 'none';
      }

      atualizarContadores();
      verificarSeSeguindo();

    } catch (e) {
      document.getElementById('nomeUsuario').innerText = 'Palpiteiro nÃ£o encontrado';
    }
  }

  async function atualizarContadores() {
    try {
      const res  = await fetch(`https://palpitoo-api.onrender.com/contadores/${idPerfil}`);
      const data = await res.json();
      document.getElementById('contSeguidores').innerText = data.seguidores ?? 'â€”';
      document.getElementById('contSeguindo').innerText   = data.seguindo   ?? 'â€”';
    } catch (e) {}
  }

  async function verificarSeSeguindo() {
    if (!idLogado || String(idLogado) === String(idPerfil)) return;
    try {
      const res  = await fetch(`https://palpitoo-api.onrender.com/esta-seguindo?seguidor=${idLogado}&seguido=${idPerfil}`);
      const data = await res.json();
      const btn  = document.getElementById('btnSeguir');
      if (data.seguindo) {
        btn.classList.replace('seguir', 'seguindo');
        btn.innerText = 'Seguindo';
      }
    } catch (e) {}
  }

  // â”€â”€ TEMPORADA ATUAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function carregarTemporada() {
    try {
      const res  = await fetch(`https://palpitoo-api.onrender.com/desempenho/${idPerfil}`);
      const data = await res.json();

      document.getElementById('t-pontos').innerText       = data.pontos        ?? 0;
      document.getElementById('t-cravadas').innerText     = data.cravadas      ?? 0;
      document.getElementById('t-acertos').innerText      = data.acertos       ?? 0;
      document.getElementById('t-erros').innerText        = data.erros         ?? 0;
      document.getElementById('t-palpites').innerText     = data.total_palpites ?? 0;

      const taxa = data.total_palpites > 0
        ? Math.round(((data.cravadas + data.acertos) / data.total_palpites) * 100)
        : 0;

      document.getElementById('t-aproveitamento').innerText = `${taxa}%`;
      document.getElementById('t-taxa-label').innerText     = `${taxa}%`;
      setTimeout(() => {
        document.getElementById('t-barra').style.width = `${taxa}%`;
      }, 100);

      // PosiÃ§Ã£o na liga
      if (data.posicao_liga) {
        const medalhas = { 1:'ğŸ¥‡', 2:'ğŸ¥ˆ', 3:'ğŸ¥‰' };
        document.getElementById('t-posicao-icone').innerText = medalhas[data.posicao_liga] || 'ğŸ…';
        document.getElementById('t-posicao-texto').innerText = `${data.posicao_liga}Âº lugar`;
        document.getElementById('t-nome-liga').innerText     = data.nome_liga || '';
      } else {
        document.getElementById('t-posicao-icone').innerText = 'ğŸ¦†';
        document.getElementById('t-posicao-texto').innerText = 'Sem liga';
      }

    } catch (e) {
      document.getElementById('t-pontos').innerText = 'Erro';
    }

    // Ãšltimos palpites
    try {
      const res     = await fetch(`https://palpitoo-api.onrender.com/ultimos-palpites/${idPerfil}`);
      const palpites = await res.json();
      const lista    = document.getElementById('lista-ultimos-palpites');
      lista.innerHTML = '';

      if (!palpites.length) {
        lista.innerHTML = '<p class="text-center" style="color:var(--text-gray);font-size:13px;">Sem palpites recentes.</p>';
        return;
      }

      palpites.slice(0, 6).forEach(p => {
        const ptsCls = p.pontos === 3 ? 'pts-3' : p.pontos === 1 ? 'pts-1' : 'pts-0';
        const ptsLabel = p.pontos === 3 ? 'ğŸ¯ +3' : p.pontos === 1 ? 'âœ… +1' : 'âŒ 0';
        const resultado = p.status === 'finalizado'
          ? `<span style="font-size:11px;color:var(--text-gray);">(${p.gols_casa_real} x ${p.gols_fora_real})</span>`
          : `<span style="font-size:11px;color:var(--accent-cyan);">em andamento</span>`;

        lista.innerHTML += `
          <div class="palpite-item">
            <div>
              <p class="palpite-jogo">${p.time_casa} x ${p.time_fora}</p>
              ${resultado}
            </div>
            <span class="palpite-placar">${p.gols_casa_palpite} x ${p.gols_fora_palpite}</span>
            <span class="palpite-pts ${ptsCls}">${ptsLabel}</span>
          </div>`;
      });
    } catch (e) {}
  }

  // â”€â”€ CARREIRA HISTÃ“RICA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function carregarCarreira() {
    try {
      const res  = await fetch(`https://palpitoo-api.onrender.com/carreira/${idPerfil}`);
      const data = await res.json();

      document.getElementById('c-pontos').innerText       = data.pontos_total    ?? 0;
      document.getElementById('c-palpites').innerText     = data.palpites_total  ?? 0;
      document.getElementById('c-ligas').innerText        = data.ligas_total     ?? 0;
      document.getElementById('c-cravadas').innerText     = data.cravadas_total  ?? 0;
      document.getElementById('c-acertos').innerText      = data.acertos_total   ?? 0;

      const taxa = data.palpites_total > 0
        ? Math.round(((data.cravadas_total + data.acertos_total) / data.palpites_total) * 100)
        : 0;

      document.getElementById('c-aproveitamento').innerText = `${taxa}%`;
      document.getElementById('c-taxa-label').innerText     = `${taxa}%`;
      setTimeout(() => { document.getElementById('c-barra').style.width = `${taxa}%`; }, 100);

      // TrofÃ©us
      const trofeus = document.getElementById('sala-trofeus');
      trofeus.innerHTML = '';
      if (!data.trofeus || !data.trofeus.length) {
        trofeus.innerHTML = '<p class="text-center" style="color:var(--text-gray);font-size:13px;grid-column:span 2;">Nenhum trofÃ©u ainda. ğŸ¦†</p>';
      } else {
        data.trofeus.forEach(t => {
          trofeus.innerHTML += `
            <div class="trofeu-card">
              <div style="font-size:34px;margin-bottom:8px;">${t.icone || 'ğŸ†'}</div>
              <p class="font-russo" style="font-size:13px;color:var(--accent-cyan);">${t.nome}</p>
              <p style="font-size:10px;color:var(--text-gray);margin-top:4px;">${t.descricao || ''}</p>
            </div>`;
        });
      }

      // HistÃ³rico de ligas
      const hist = document.getElementById('historico-ligas');
      hist.innerHTML = '';
      if (!data.historico_ligas || !data.historico_ligas.length) {
        hist.innerHTML = '<p class="text-center" style="color:var(--text-gray);font-size:13px;">Nenhuma liga participada ainda.</p>';
      } else {
        data.historico_ligas.forEach(l => {
          const corPos = l.posicao === 1 ? '#eab308' : l.posicao === 2 ? '#d1d5db' : 'var(--accent-cyan)';
          const iconPos = l.posicao === 1 ? 'ğŸ† CampeÃ£o' : l.posicao === 2 ? 'ğŸ¥ˆ Vice' : `${l.posicao}Âº Lugar`;
          hist.innerHTML += `
            <div class="liga-historico-item">
              <div>
                <p class="font-russo" style="font-size:14px;color:var(--text-white);">${l.nome_liga}</p>
                <p style="font-size:11px;color:var(--text-gray);">${l.temporada || ''}</p>
              </div>
              <div style="text-align:right;">
                <p class="font-russo" style="font-size:15px;color:${corPos};">${iconPos}</p>
                <p style="font-size:12px;color:var(--accent-cyan);">${l.pontos} pts</p>
              </div>
            </div>`;
        });
      }

    } catch (e) {
      document.getElementById('c-pontos').innerText = 'Erro';
    }
  }

  // â”€â”€ INICIAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  carregarPerfil();
  carregarTemporada();
  carregarCarreira();
</script>

</body>
</html>